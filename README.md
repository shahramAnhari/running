# Shotarun Coach/Student App

ุงู ูพุฑูฺู ฺฉ ุฑุงุจุท ูุจ ุจุฑุง ูุฏุฑุช ุชุนุงูู ุจู ูุฑุจ ู ุดุงฺฏุฑุฏ (ู ุฏุฑ ุงุฏุงูู ุงุฏูู) ุงุณุช. ุณู ุตูุญูู ุงุตู ุฒุฑ `/app/` ูุฌูุฏ ุฏุงุฑุฏ:

- `app/coach.html` โ ุฏุงุดุจูุฑุฏ ูุฑุจ ุจุฑุง ุณุงุฎุช ุจุฑูุงููุ ฺฏุฑููโุจูุฏ ุดุงฺฏุฑุฏุงูุ ุชุฃุฏ ุฏุฑุฎูุงุณุชโูุง ุนุถูุช ู ูุดุงูุฏู ุฏุงุฏูโูุง ุดุงฺฏุฑุฏ.
- `app/student.html` โ ูพูู ุดุงฺฏุฑุฏ (ุจุงุฒุทุฑุงุญโุดุฏู ููุฑุงู ุจุง ุชู ุชุฑู) ุจุฑุง ูุฑูุฏ/ุซุจุชโูุงู ุจุง ุงููุ ูุดุงูุฏู ุจุฑูุงููโูุงุ ูพุฑุฏุงุฎุชโูุงุ ุงูุฏุงูุ ุฏูุชุฑฺู ุชูุฑู ู ูพุฑููุงู.
- `app/admin.html` โ ุงุจุฒุงุฑ ูุฏุฑุช ูุฑุจโูุง ู ุงุฏููโูุง.

## ุฑุงูโุงูุฏุงุฒ ูุญู

```bash
git clone https://github.com/shahramAnhari/running.git
cd running/server
npm install
node index.js
```

ุณุฑูุฑ Node ุฑู ูพูุฑุช `3001` ุจุงูุง ูโุขุฏ ู ูู API ู ูู ูุงูโูุง ุงุณุชุงุชฺฉ `/app` ุฑุง ุณุฑู ูโฺฉูุฏ. ุตูุญุงุช ุฑุง ุงุฒ ุทุฑู ูุฑูุฑฺฏุฑ ุจุงุฒ ฺฉูุฏ:

- `http://localhost:3001/app/student.html`
- `http://localhost:3001/app/coach.html`
- `http://localhost:3001/app/admin.html`

> โ๏ธ ุตูุญุงุช ุฑุง ูุณุชููุงู ุจุง `file://` ุจุงุฒ ูฺฉูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช callโูุง `/api` ุดฺฉุณุช ูโุฎูุฑูุฏ.

## ูฺฉุงุช ูพุงฺฏุงู ุฏุงุฏู

- ูุงู ุงุตู SQLite ุฏุฑ `server/db.sqlite` ูฺฏูุฏุงุฑ ูโุดูุฏ. ุณุชููโูุง ุฌุฏุฏ `reset_token` ู `reset_expires_at` ุจุฑุง ุจุงุฒุงุจ ุฑูุฒ ุงุถุงูู ุดุฏูโุงูุฏ.
- ุซุจุชโูุงู ุดุงฺฏุฑุฏ ุงุฒ ุทุฑู `registerStudent` ุงูุฌุงู ูโุดูุฏ ู ูุถุนุช ุญุณุงุจ ุงุจุชุฏุง `pending` ุงุณุช. ูุฑุจ ุฏุฑ ูพูู ุฎูุฏุด ูโุชูุงูุฏ ฺฉุงุฑุจุฑ ุฑุง ุจู `approved` ุง `rejected` ุชุบุฑ ุฏูุฏ.
- ูุณุฑูุง API ูุฑุจูุท ุจู ูุฑุงููุด ุฑูุฒ:
  - `POST /api/auth/password/forgot` โ ุชููุฏ ุชูฺฉู ู ุงุฑุณุงู ุงูู (ุฏุฑ ูุญุท ุชูุณุนู ุชูฺฉู ุฏุฑ Response ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ).
  - `POST /api/auth/password/reset` โ ุฐุฎุฑู ุฑูุฒ ุฌุฏุฏ ุจุง ุชูฺฉู ูุนุชุจุฑ.

## ุชุบุฑุงุช UI ุงุฎุฑ

- ูพูู ุดุงฺฏุฑุฏ ุจุง ุชู ุดุจุ ูููุชโุขฺฉูู (Font Awesome)ุ ุฏฺฉููโูุง ูุงุฑูุฌ ู ููุฏุงู ูพุงูโูุง ุจุงุฒุทุฑุงุญ ุดุฏู ุงุณุช.
- ูุฑูโูุง ูุฑูุฏ/ุซุจุชโูุงู/ุจุงุฒุงุจ ุฑูุฒ ุฏุฑ ฺฉ ฺฉุงุฑุช ุดุดูโุง ููุธู ูุฑุงุฑ ฺฏุฑูุชูโุงูุฏุ ฺฺฉโุจุงฺฉุณ ยซูุฑุง ุจู ุฎุงุทุฑ ุจุณูพุงุฑยป ุชุฑุงุฒ ููุงุณุจ ุฏุงุฑุฏ.
- ุฏุฑ ูพูู ูุฑุจุ ุดุงฺฏุฑุฏุงู ุชุฃุฏุดุฏู ู ุฏุฑ ุงูุชุธุงุฑ ุฌุฏุง ุดุฏูโุงูุฏุ ุดูุงุฑูุฏูโูุง ุฏุฑ ุนููุงูโูุง ุฏุฏู ูโุดููุฏ ู ุฏฺฉููโูุง ุชุงุฏ/ุฑุฏ ุจุฑุง ูุฑ ุดุงฺฏุฑุฏ ุงุถุงูู ุดุฏู ุงุณุช.

## ุชุณุชโูุง ฺฉู ุงูุฌุงู ุดุฏู

- `node --check server/index.js`
- `node --check server/db.js`
- `node --check app/js/student.js`
- `node --check app/js/coach.js`
- UI ุชุณุช ุฏุณุช ุฑู `http://localhost:3001` ุจุฑุง ุณูุงุฑููุง ุซุจุชโูุงูุ ุชุฃุฏ ูุฑุจ ู ูุฑูุฏ ุดุงฺฏุฑุฏ.

## ุงุฏุงููู ฺฉุงุฑ ูพุดููุงุฏ

- ุงูุฒูุฏู ุณุณุชู ุงุฑุณุงู ุงูู ูุงูุน ุจุฑุง ุจุงุฒุงุจ ุฑูุฒ (ูุนูุงู ุชูฺฉู ุฏุฑ Response ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ).
- ุงูุฒูุฏู ูุงฺฏู ูุฑุจ ู ุงุฏูู ุจุง OTP ุง 2FA (ุฏุฑ ุตูุฑุช ูุงุฒ).
- ุชฺฉูู ูุณุชูุฏุงุช ุจุฑุง ุงุณุชูุฑุงุฑ ุฑู ุณุฑูุฑ (ูุตุจ PM2ุ ฺฉุงููฺฏ nginx) ุฏุฑ ฺฉ ูุงู ุฌุฏุงฺฏุงูู.
- ููุดุชู ุชุณุชโูุง ุฎูุฏฺฉุงุฑ (integration ุง unit) ุจุฑุง ูุณุฑูุง auth ุฌุฏุฏ.

ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ุงุทูุงุนุงุช ุจุดุชุฑ ุง ุณูุงุฑููุง ุชุณุชุ ุจู ุจุฎุดโูุง ุจุงูุงุชุฑ ูุฑุงุฌุนู ฺฉูุฏ. ูููู ุจุงุดุฏ! ๐ฏ

## ุชุบุฑุงุช ุงูุฌุงูโุดุฏู (ฑต ุชุง ฑถ ููุฑ ฑดฐด)

- **ูพูู ูุฑุจ**
  - ุชุจ ยซุงูุชุณุงุจ ุจุฑูุงููยป ุจุงุฒุทุฑุงุญ ุดุฏุ ูุฑูโูุง ยซุจุฑูุงูู ุจุฑุง ฺฏุฑููโูุงยป ู ยซุจุฑูุงูู ุจุฑุง ุดุงฺฏุฑุฏูุงยป ุชุจโุจูุฏ ุดุฏู ู ุงูุชุฎุงุจ ฺูุฏฺฏุงูู ุจุง ฺฺฉโุจุงฺฉุณโูุง ูุงฺฉูุดโฺฏุฑุง (ููุงุณุจ ููุจุงู) ุงูุฌุงู ูโุดูุฏ.
  - ุชุจ ยซฺฏุฑููโุจูุฏ ุณุฑุนยป ฺฉุงููุงู ุจุงุฒููุณ ุดุฏุ ุฌุณุชโูุฌู ุฒูุฏูุ ุงูุฒูุฏู/ุญุฐู ุดุงฺฏุฑุฏ ุจุง ฺฉ ฺฉูฺฉุ ุฏุงููฺฏโูุง ฺฏุฑุงูฺฉ ู Toast ุจุฑุง ููุงุด ูุชุฌูโ ุนููุงุช ุงูุฒูุฏู ุดุฏู ุงุณุช.
  - ุญุฐู/ูุฑุงุด ุจุฑูุงููโูุงุ ฺฏุฑููโูุงุ ุดุงฺฏุฑุฏูุงุ ูพุฑุฏุงุฎุชโูุง ู ุงูุชุณุงุจโูุง ุจุง ุฏุงููฺฏโูุง ูุฏุฑู ู Toastูุง ฺฉูพุงุฑฺู ุงูุฌุงู ูโุดูุฏ.

- **ูพูู ุดุงฺฏุฑุฏ**
  - ฺฉุงุฑุช ยซุจุฑูุงููโูุงยป ุจุงุฒุทุฑุงุญ ุดุฏุ ุจุฑุง ูุฑ ุฑูุฒ ุจุฑูุงูู ูโุชูุงู ูุธุฑ ุซุจุช ฺฉุฑุฏุ ูุธุฑุงุช ููุงุด ุฏุงุฏู ูโุดููุฏ ู ููฺฉ ยซุฏูุชุฑฺู ุชูุฑูยป ููุงู ุฑูุฒ ุฑุง ุจุงุฒ ูโฺฉูุฏ.
  - ูุฑู ูุฑูุฏ/ุซุจุชโูุงู ุชุจโุจูุฏ ุดุฏุ ููฺฉ ยซูุฑุงููุด ุฑูุฒุยป ุฒุฑ ููุฏ ุฑูุฒ ูุฑุงุฑ ฺฏุฑูุช ู ุจุงฺฉุณ ุงุทูุงุนโุฑุณุงู ุจุงูุง ูุฑู ุฌุงฺฏุฒู ููุฏุงู ูุฏู ุดุฏ.
  - ฺฏุฒููโ ยซูุฑุง ุจู ุฎุงุทุฑ ุจุณูพุงุฑยป ุงฺฉููู ุงูู ู ุฑูุฒ ุนุจูุฑ (ุจู ุตูุฑุช ุฑูุฒฺฏุฐุงุฑโุดุฏู) ุฑุง ุฐุฎุฑู ูโฺฉูุฏ ุชุง ูพุณ ุงุฒ ุฑูุฑุด ูู ุฏุฑ ุฏุณุชุฑุณ ุจุงุดุฏ.

- **ุงุณุชุงูโูุง ู ุจฺฉโุงูุฏ**
  - ฺฉูุงุณโูุง ู ุงุณุชุงูโูุง ุฌุฏุฏ ุจุฑุง ุชุจโูุงุ ฺฺฉโุจุงฺฉุณโูุง ู ฺฉุงุฑุชโูุง ุจุฑูุงูู ุจู `app/styles.css` ุงูุฒูุฏู ุดุฏ.
  - ฺฉูุฆุฑโูุง ุญุณุงุณ ุฏุฑ `server/db.js` ุจุง ฺฉูุชุดู ุตุญุญ ุจุงุฒููุณ ุดุฏ ุชุง ุนููุงุช ุญุฐู ุจุฏูู ุฎุทุง ุงุฌุฑุง ุดูุฏ.

## ุฑุงูููุง ุงุณุชูุฑุงุฑ ุชุบุฑุงุช ุฑู ุณุฑูุฑ

1. **ุฏุฑุงูุช ุขุฎุฑู ูุณุฎู**
   ```bash
   cd /var/www/coach-app/coach-student-app
   git pull origin main
   ```
2. **ูุตุจ ูุงุจุณุชฺฏโูุง ุฌุฏุฏ (ุฏุฑ ุณุฑูุฑ)**
   ```bash
   cd server
   npm install --production
   ```
3. **ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ Node (PM2)**
   ```bash
   pm2 restart coach-api
   pm2 logs coach-api --lines 50   # ุฏุฑ ุตูุฑุช ูุงุฒ ุจุฑุง ุจุฑุฑุณ
   ```
4. **ุชุณุช ุณูุงูุช API**
   ```bash
   curl http://127.0.0.1:3001/api/health
   curl https://shotarun.ir/api/health
   ```
5. **ุจุงุฒุจู ุฑุงุจุท ฺฉุงุฑุจุฑ**
   - `https://shotarun.ir/app/coach.html` (Ctrl+F5) โ ุชุจ ยซุงูุชุณุงุจ ุจุฑูุงููยป ู ยซฺฏุฑููโุจูุฏ ุณุฑุนยป ุฑุง ูุฑูุฑ ฺฉูุฏ.
   - `https://shotarun.ir/app/student.html` โ ฺฉุงุฑุชโูุง ุจุฑูุงููุ ุซุจุช ูุธุฑ ุฑูุฒุงูู ู ฺฏุฒููโ ยซูุฑุง ุจู ุฎุงุทุฑ ุจุณูพุงุฑยป ุฑุง ุชุณุช ฺฉูุฏ.

6. **ุจุงุฒุฎูุงู ูพฺฉุฑุจูุฏ Nginx (ุฏุฑ ุตูุฑุช ูุงุฒ)**
   ```bash
   sudo nginx -t
   sudo systemctl reload nginx
   ```

> ูพุด ุงุฒ ุฌุงฺฏุฒู ุฏุชุงุจุณ (`server/db.sqlite*`) ุญุชูุงู ุงุฒ ูุณุฎูโ ูุนู ุจฺฉโุขูพ ุจฺฏุฑุฏ ุชุง ุฏุงุฏูโูุง ุฏุฑ ุญุงู ุงุณุชูุงุฏู ุงุฒ ุจู ูุฑูุฏ.
